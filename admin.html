<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Car Wash Admin Dashboard</title>

<style>
/* ================= General Reset ================= */
* { margin: 0; padding: 0; box-sizing: border-box; }
body {
  font-family: 'Poppins', Arial, sans-serif;
  line-height: 1.6;
  background: linear-gradient(135deg, #0f172a, #1e293b);
  color: #f1f5f9;
}

/* ================= Header ================= */
header {
  backdrop-filter: blur(12px);
  background: rgba(15, 23, 42, 0.85);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
  padding: 15px 30px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: sticky;
  top: 0;
  z-index: 1000;
}

/* Logo */
.logo {
  display: flex;
  align-items: center;
  font-weight: 700;
  font-size: 24px;
  letter-spacing: 1px;
  background: linear-gradient(90deg, #22d3ee, #14b8a6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
.logo img { width: 40px; margin-right: 10px; }

/* Navigation */
nav ul { display: flex; list-style: none; gap: 30px; }
nav a {
  color: #e2e8f0;
  text-decoration: none;
  font-weight: 500;
  position: relative;
  transition: all 0.3s ease;
}
nav a::after {
  content: "";
  position: absolute;
  width: 0%;
  height: 2px;
  bottom: -6px;
  left: 0;
  background: linear-gradient(90deg, #22d3ee, #14b8a6);
  transition: width 0.3s ease;
}
nav a:hover::after { width: 100%; }
nav a:hover { color: #22d3ee; }

/* Active nav state */
nav a.active { color: #22d3ee; }
nav a.active::after { width: 100%; }

/* ================= Dashboard Section ================= */
.dashboard { padding: 30px; }

/* Action Buttons */
.actions { display: flex; gap: 15px; margin-bottom: 30px; flex-wrap: wrap; }
.actions button {
  padding: 10px 20px;
  font-size: 14px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-weight: bold;
  transition: all 0.3s ease;
}
.btn-new { background-color: #22d3ee; color: #0f172a; }
.btn-new:hover { background-color: #14b8a6; color: #fff; }
.btn-view {
  background-color: rgba(255, 255, 255, 0.05);
  color: #f1f5f9;
  border: 1px solid rgba(255,255,255,0.2);
}
.btn-view:hover { background-color: rgba(34, 211, 238, 0.2); color: #fff; }

/* Summary Cards */
.summary-cards { display: flex; gap: 20px; flex-wrap: wrap; margin-bottom: 20px; }
.card {
  background: rgba(255, 255, 255, 0.05);
  flex: 1 1 200px;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  display: flex;
  justify-content: space-between;
  align-items: center;
  backdrop-filter: blur(10px);
  transition: transform 0.3s ease;
}
.card:hover { transform: translateY(-5px); }
.card h3 { font-size: 16px; color: #cbd5e1; }
.card p { font-size: 24px; font-weight: bold; }

/* ================= Shared Panel Style ================= */
.panel {
  margin-top: 10px;
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  padding: 22px;
  box-shadow: 0 4px 14px rgba(0,0,0,0.25);
  backdrop-filter: blur(10px);
}
.panel-title {
  font-size: 22px;
  margin: 0 0 14px 0;
  color: #22d3ee;
  font-weight: 700;
}

/* ================= Active Transactions (Empty State) ================= */
.active-transactions {
  min-height: 220px;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  gap: 14px;
  text-align: center;
  color: #cbd5e1;
}
.empty-icon-wrap {
  width: 90px;
  height: 90px;
  border-radius: 999px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  display: grid;
  place-items: center;
}
.empty-icon { width: 42px; height: 42px; opacity: 0.9; }
.empty-text { font-size: 16px; color: #94a3b8; }

/* ================= Parking Slot Overview ================= */
.slot-overview .topbar {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
  margin-bottom: 10px;
}
.legend { display: flex; gap: 18px; align-items: center; font-size: 14px; color: #cbd5e1; }
.legend-item { display: flex; gap: 8px; align-items: center; }
.dot { width: 10px; height: 10px; border-radius: 999px; }
.dot.available { background: #22c55e; }
.dot.occupied { background: #ef4444; }

.slot-overview table {
  width: 100%;
  border-collapse: collapse;
  background: rgba(15, 23, 42, 0.65);
  border-radius: 12px;
  overflow: hidden;
}
.slot-overview th, .slot-overview td {
  text-align: left;
  padding: 16px 14px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
}
.slot-overview th {
  background: rgba(34, 211, 238, 0.14);
  font-weight: 600;
  color: #e2e8f0;
}
.slot-overview tbody tr:hover { background: rgba(255,255,255,0.06); }

.status-pill {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 14px;
  border-radius: 999px;
  font-weight: 600;
  font-size: 13px;
  width: fit-content;
  border: 1px solid rgba(255,255,255,0.12);
}
.status-pill .mini-dot { width: 9px; height: 9px; border-radius: 999px; }
.status-pill.available { background: rgba(34, 197, 94, 0.18); color: #bbf7d0; }
.status-pill.available .mini-dot { background: #22c55e; }
.status-pill.occupied { background: rgba(239, 68, 68, 0.18); color: #fecaca; }
.status-pill.occupied .mini-dot { background: #ef4444; }

.controls {
  display: flex;
  gap: 10px;
  align-items: center;
  justify-content: flex-end;
  flex-wrap: wrap;
  margin-bottom: 12px;
}
.controls label { font-size: 13px; color: #cbd5e1; }
.controls select,
.slot-status-select {
  background: rgba(15, 23, 42, 0.9);
  color: #e2e8f0;
  border: 1px solid rgba(255,255,255,0.18);
  border-radius: 10px;
  padding: 8px 10px;
  outline: none;
  cursor: pointer;
}
.small-note {
  margin-top: 10px;
  text-align: center;
  color: #94a3b8;
  font-size: 13px;
}

/* ================= Services ================= */
.services-grid {
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 16px;
}
.service-card {
  background: rgba(34, 211, 238, 0.06);
  border: 1px solid rgba(34, 211, 238, 0.25);
  border-radius: 12px;
  padding: 18px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 14px;
}
.service-info h3 { font-size: 16px; color: #e2e8f0; margin-bottom: 6px; }
.service-info .price { font-size: 22px; font-weight: 800; color: #22d3ee; }

/* Toggle switch */
.switch { position: relative; display: inline-block; width: 54px; height: 30px; flex: 0 0 auto; }
.switch input { display: none; }
.slider {
  position: absolute; cursor: pointer; inset: 0;
  background: rgba(255,255,255,0.18);
  border: 1px solid rgba(255,255,255,0.22);
  transition: .2s; border-radius: 999px;
}
.slider:before {
  position: absolute; content: "";
  height: 22px; width: 22px;
  left: 4px; top: 50%;
  transform: translateY(-50%);
  background: rgba(15, 23, 42, 0.95);
  transition: .2s; border-radius: 999px;
}
.switch input:checked + .slider {
  background: rgba(20, 184, 166, 0.45);
  border-color: rgba(20, 184, 166, 0.7);
}
.switch input:checked + .slider:before { transform: translate(24px, -50%); }

/* ================= Orders ================= */
.completed-orders {
  background: rgba(15, 23, 42, 0.9);
  padding: 40px 20px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.3);
  margin-top: 10px;
}
.completed-orders h2 {
  text-align: center;
  margin-bottom: 30px;
  font-size: 28px;
  color: #22d3ee;
}
table.base-table {
  width: 100%;
  border-collapse: collapse;
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  border-radius: 12px;
  overflow: hidden;
}
.base-table th, .base-table td {
  text-align: center;
  padding: 15px;
  border-bottom: 1px solid rgba(255,255,255,0.1);
}
.base-table th { background: rgba(34, 211, 238, 0.2); font-weight: 600; }
.base-table tbody tr:hover { background: rgba(255, 255, 255, 0.07); }
input.complete-check { width: 18px; height: 18px; cursor: pointer; accent-color: #22d3ee; }

/* ‚úÖ COMPLETED ROW STYLE */
tr.completed { opacity: 0.6; }
tr.completed td { text-decoration: line-through; color: #94a3b8; }

/* ================= Responsive ================= */
@media (max-width: 768px) {
  .summary-cards { flex-direction: column; }
  .actions { flex-direction: column; }
  nav ul { gap: 20px; }
  .slot-overview .topbar { flex-direction: column; align-items: flex-start; }
  .controls { justify-content: flex-start; }
  .services-grid { grid-template-columns: 1fr; }
}
</style>
</head>

<body>
<header>
  <div class="logo">
    <img src="Images/carwashicon.png" alt="Car Wash Icon">
    Car Wash Management
  </div>

  <!-- ‚úÖ NAV: click = scroll to section -->
  <nav>
    <ul>
      <li><a href="#top" id="navDashboard" class="active">Dashboard</a></li>
      <li><a href="#servicesSection" id="navServices">Services</a></li>
      <li><a href="#slotsSection" id="navSlots">Slots</a></li>
      <li><a href="#ordersSection" id="navOrders">Orders</a></li>
      <li><a href="#" id="navLogout">Logout</a></li>
    </ul>
  </nav>
</header>

<section class="dashboard" id="top">

 <!-- Action Buttons -->
<div class="actions">
  <button class="btn-new" id="btnNewTransaction">+ New Parking Transaction</button>
  <button class="btn-view" id="btnShowAllSlots">Show All Slots</button>
  <button class="btn-view" id="btnShowAvailableOnly">Available Only</button>
</div>

  <!-- Summary Cards -->
  <div class="summary-cards">
    <div class="card">
      <div>
        <h3>Total Slots</h3>
        <p id="statTotalSlots">0</p>
      </div>
      <div>üÖøÔ∏è</div>
    </div>

    <div class="card">
      <div>
        <h3>Available Slots</h3>
        <p id="statAvailableSlots">0</p>
      </div>
      <div>‚úÖ</div>
    </div>

    <div class="card">
      <div>
        <h3>Occupied Slots</h3>
        <p id="statOccupiedSlots">0</p>
      </div>
      <div>‚ùå</div>
    </div>

    <div class="card">
      <div>
        <h3>Active Vehicles</h3>
        <p>0</p>
      </div>
      <div>üöó</div>
    </div>
  </div>

  <!-- ‚úÖ Active Transactions -->
  <div class="panel" id="dashboardSection">
    <h2 class="panel-title">Active Transactions</h2>

    <div class="active-transactions" id="activeTransactionsMount">
      <div class="empty-icon-wrap" aria-hidden="true">
        <svg class="empty-icon" viewBox="0 0 24 24" fill="none">
          <path d="M7 3h7l3 3v15a3 3 0 0 1-3 3H7a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3Z"
                stroke="rgba(148,163,184,0.9)" stroke-width="1.8" />
          <path d="M14 3v4a2 2 0 0 0 2 2h4"
                stroke="rgba(148,163,184,0.9)" stroke-width="1.8" />
          <path d="M8 11h8M8 15h6"
                stroke="rgba(148,163,184,0.9)" stroke-width="1.8" stroke-linecap="round" />
        </svg>
      </div>
      <div class="empty-text">No active transactions yet</div>
    </div>
  </div>

  <!-- ‚úÖ Parking Slot Overview -->
  <div class="panel slot-overview" id="slotsSection">
    <div class="topbar">
      <h2 class="panel-title" style="margin:0;">Parking Slot Overview</h2>
      <div class="legend">
        <div class="legend-item"><span class="dot available"></span> Available</div>
        <div class="legend-item"><span class="dot occupied"></span> Occupied</div>
      </div>
    </div>

    <div class="controls">
      <label for="filterStatus">Filter:</label>
      <select id="filterStatus">
        <option value="ALL">All</option>
        <option value="Available">Available</option>
        <option value="Occupied">Occupied</option>
      </select>
    </div>

    <div id="slotTableMount"></div>
    <div class="small-note" id="slotFooterNote"></div>
  </div>

  <!-- ‚úÖ Available Services -->
  <div class="panel" id="servicesSection">
    <h2 class="panel-title">Available Services</h2>
    <div class="services-grid" id="servicesGrid"></div>
  </div>

  <!-- ‚úÖ Orders -->
  <div class="completed-orders" id="ordersSection">
    <h2>Completed Orders</h2>
    <table class="base-table">
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Customer Name</th>
          <th>Vehicle Type</th>
          <th>Service</th>
          <th>Date</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>#CW001</td>
          <td>Juan Dela Cruz</td>
          <td>Sedan</td>
          <td>Premium Wash</td>
          <td>Feb 28, 2026</td>
          <td><input type="checkbox" class="complete-check"></td>
        </tr>
        <tr>
          <td>#CW002</td>
          <td>Maria Santos</td>
          <td>SUV</td>
          <td>Full Detailing</td>
          <td>Feb 28, 2026</td>
          <td><input type="checkbox" class="complete-check"></td>
        </tr>
        <tr>
          <td>#CW003</td>
          <td>Mark Reyes</td>
          <td>Hatchback</td>
          <td>Basic Wash</td>
          <td>Feb 27, 2026</td>
          <td><input type="checkbox" class="complete-check"></td>
        </tr>
      </tbody>
    </table>
  </div>

</section>

<script>
/**
 * ‚úÖ JSON-style data (future-ready for PHP)
 * Later replace with:
 * const appData = <?php echo json_encode($appData); ?>;
 */
const appData = {
  slots: [
    { slotId: "A001", location: "Ground Floor", isAvailable: false },
    { slotId: "A002", location: "Ground Floor", isAvailable: true },
    { slotId: "A003", location: "Ground Floor", isAvailable: false },
    { slotId: "A004", location: "Ground Floor", isAvailable: false },
    { slotId: "A005", location: "Ground Floor", isAvailable: false },
    { slotId: "A006", location: "Ground Floor", isAvailable: false },
    { slotId: "A007", location: "Ground Floor", isAvailable: false },
    { slotId: "A008", location: "Ground Floor", isAvailable: true },
    { slotId: "A009", location: "Ground Floor", isAvailable: false },
    { slotId: "A010", location: "Ground Floor", isAvailable: false }
  ],
  services: [
    { serviceId: 1, name: "Basic Car Wash", price: 150, isAvailable: true },
    { serviceId: 2, name: "Premium Car Wash", price: 300, isAvailable: true },
    { serviceId: 3, name: "Interior Cleaning", price: 200, isAvailable: true },
    { serviceId: 4, name: "Wax & Polish", price: 400, isAvailable: true },
    { serviceId: 5, name: "Engine Cleaning", price: 350, isAvailable: true },
    { serviceId: 6, name: "Valet Service", price: 100, isAvailable: true },
    { serviceId: 7, name: "Overnight Parking", price: 250, isAvailable: true },
    { serviceId: 8, name: "Tire Cleaning", price: 120, isAvailable: true }
  ]
};

/* ========= CONNECT: New Transaction button ========= */
const btnNewTransaction = document.getElementById("btnNewTransaction");
if (btnNewTransaction) {
  btnNewTransaction.addEventListener("click", () => {
    window.location.href = "new-transaction.html";
  });
}

/* ========= Smooth scroll + active nav highlight ========= */
const navMap = [
  { key: "navDashboard", target: "top" },
  { key: "navServices", target: "servicesSection" },
  { key: "navSlots", target: "slotsSection" },
  { key: "navOrders", target: "ordersSection" }
];

function setActiveNav(activeId) {
  navMap.forEach(n => {
    const el = document.getElementById(n.key);
    if (!el) return;
    el.classList.toggle("active", n.key === activeId);
  });
}

navMap.forEach(n => {
  const link = document.getElementById(n.key);
  const targetEl = document.getElementById(n.target);
  if (!link || !targetEl) return;

  link.addEventListener("click", (e) => {
    e.preventDefault();
    targetEl.scrollIntoView({ behavior: "smooth", block: "start" });
    setActiveNav(n.key);
  });
});

/* ========= Slot stats ========= */
const statTotalSlots = document.getElementById("statTotalSlots");
const statAvailableSlots = document.getElementById("statAvailableSlots");
const statOccupiedSlots = document.getElementById("statOccupiedSlots");

function updateSlotStats() {
  const total = appData.slots.length;
  const available = appData.slots.filter(s => s.isAvailable).length;
  const occupied = total - available;

  statTotalSlots.textContent = total;
  statAvailableSlots.textContent = available;
  statOccupiedSlots.textContent = occupied;
}

/* ========= Slots table ========= */
const slotTableMount = document.getElementById("slotTableMount");
const slotFooterNote = document.getElementById("slotFooterNote");

function slotStatusText(slot) {
  return slot.isAvailable ? "Available" : "Occupied";
}

function renderSlots(filter = "ALL") {
  let rows = appData.slots;
  if (filter === "Available") rows = rows.filter(s => s.isAvailable);
  if (filter === "Occupied") rows = rows.filter(s => !s.isAvailable);

  let html = `
    <table>
      <thead>
        <tr>
          <th style="width: 22%;">Slot ID</th>
          <th style="width: 38%;">Location</th>
          <th style="width: 22%;">Status</th>
          <th style="width: 18%;">Set Status</th>
        </tr>
      </thead>
      <tbody>
  `;

  rows.forEach(slot => {
    const pillClass = slot.isAvailable ? "available" : "occupied";
    const pillText = slotStatusText(slot);

    html += `
      <tr>
        <td><strong>${slot.slotId}</strong></td>
        <td>${slot.location}</td>
        <td>
          <span class="status-pill ${pillClass}">
            <span class="mini-dot"></span>
            ${pillText}
          </span>
        </td>
        <td>
          <select data-slot-id="${slot.slotId}" class="slot-status-select">
            <option value="Available" ${slot.isAvailable ? "selected" : ""}>Available</option>
            <option value="Occupied" ${!slot.isAvailable ? "selected" : ""}>Occupied</option>
          </select>
        </td>
      </tr>
    `;
  });

  html += `</tbody></table>`;
  slotTableMount.innerHTML = html;
  slotFooterNote.textContent = `Showing ${rows.length} of ${appData.slots.length} slots`;

  // status control
  document.querySelectorAll(".slot-status-select").forEach(sel => {
    sel.addEventListener("change", (e) => {
      const id = e.target.getAttribute("data-slot-id");
      const value = e.target.value;

      const slot = appData.slots.find(s => s.slotId === id);
      if (!slot) return;

      slot.isAvailable = (value === "Available");
      updateSlotStats();

      const currentFilter = document.getElementById("filterStatus").value;
      renderSlots(currentFilter);
    });
  });
}

/* Filters + buttons */
document.getElementById("filterStatus").addEventListener("change", (e) => {
  renderSlots(e.target.value);
});
document.getElementById("btnShowAllSlots").addEventListener("click", () => {
  document.getElementById("filterStatus").value = "ALL";
  renderSlots("ALL");
});
document.getElementById("btnShowAvailableOnly").addEventListener("click", () => {
  document.getElementById("filterStatus").value = "Available";
  renderSlots("Available");
  document.getElementById("slotsSection").scrollIntoView({ behavior: "smooth", block: "start" });
  setActiveNav("navSlots");
});

/* ========= Services ========= */
const servicesGrid = document.getElementById("servicesGrid");
function renderServices() {
  servicesGrid.innerHTML = "";
  appData.services.forEach(service => {
    const card = document.createElement("div");
    card.className = "service-card";
    const toggleId = `svc_${service.serviceId}`;

    card.innerHTML = `
      <div class="service-info">
        <h3>${service.name}</h3>
        <div class="price">‚Ç±${service.price}</div>
      </div>

      <label class="switch" title="Toggle availability">
        <input type="checkbox" id="${toggleId}" ${service.isAvailable ? "checked" : ""} />
        <span class="slider"></span>
      </label>
    `;
    servicesGrid.appendChild(card);

    const checkbox = card.querySelector(`#${toggleId}`);
    checkbox.addEventListener("change", (e) => {
      service.isAvailable = e.target.checked;
      card.style.opacity = service.isAvailable ? "1" : "0.45";
    });

    card.style.opacity = service.isAvailable ? "1" : "0.45";
  });
}

/* ========= Orders (cross out) ========= */
document.querySelectorAll('.complete-check').forEach(checkbox => {
  checkbox.addEventListener('change', function () {
    const row = this.closest('tr');
    row.classList.toggle('completed', this.checked);
  });
});

/* ========= ACTIVE TRANSACTIONS (reads from localStorage) =========
   Later this becomes: fetch from PHP / database
*/
const activeTransactionsMount = document.getElementById("activeTransactionsMount");

function getActiveTransactions() {
  try {
    const raw = localStorage.getItem("carwash_active_transactions");
    return raw ? JSON.parse(raw) : [];
  } catch {
    return [];
  }
}

function renderActiveTransactions() {
  const txs = getActiveTransactions();

  if (!txs.length) {
    // keep your empty state
    return;
  }

  let html = `
    <div style="width:100%;">
      <table class="base-table" style="text-align:left;">
        <thead>
          <tr>
            <th style="text-align:left;">Customer</th>
            <th style="text-align:left;">Plate</th>
            <th style="text-align:left;">Slot</th>
            <th style="text-align:left;">Services</th>
            <th style="text-align:left;">Total</th>
          </tr>
        </thead>
        <tbody>
  `;

  txs.forEach(t => {
    const serviceNames = (t.services || []).map(s => s.name).join(", ") || "-";
    html += `
      <tr>
        <td style="text-align:left;">${t.customerName}</td>
        <td style="text-align:left;">${t.plateNumber}</td>
        <td style="text-align:left;">${t.slotId}</td>
        <td style="text-align:left;">${serviceNames}</td>
        <td style="text-align:left;">‚Ç±${t.total || 0}</td>
      </tr>
    `;
  });

  html += `</tbody></table></div>`;
  activeTransactionsMount.innerHTML = html;
}

/* Initial load */
updateSlotStats();
renderSlots("ALL");
renderServices();
renderActiveTransactions();
</script>

</body>
</html>