<!DOCTYPE html>
<html>
<head>
    <title>Car Wash Services</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

<header>
    <div class="header-content">
        <div class="logo">
            <img class="icon" src="Images/carwashicon.png" alt="Car Wash Icon"> Car Wash Queue
        </div>
        <nav>
            <ul>
                <li><a href="services.html">Service</a></li>
                <li><a href="reports.html">Reports</a></li>
                <li><a href="slots.html">Slots</a></li>
                <li><a href="login.html">Logout</a></li>
            </ul>
        </nav>
    </div>
</header>

<section class="services-section">
    <h1 class="services-title">Our Car Wash Services</h1>

    <div class="services-container">

        <!-- Each service has a checkbox for multi-selection -->
        <div class="service-card">
            <input type="checkbox" class="service-check" id="basic-wash" data-prices="150,200,250">
            <label for="basic-wash">
                <h3>Basic Wash</h3>
                <p>Exterior hand wash, tire cleaning, and quick dry.</p>
                <span class="price">₱150</span>
            </label>
        </div>

        <div class="service-card">
            <input type="checkbox" class="service-check" id="premium-wash" data-prices="300,400,500">
            <label for="premium-wash">
                <h3>Premium Wash</h3>
                <p>Exterior wash, interior vacuum, dashboard wipe, and tire shine.</p>
                <span class="price">₱300</span>
            </label>
        </div>

        <div class="service-card">
            <input type="checkbox" class="service-check" id="full-detailing" data-prices="1200,1500,1800">
            <label for="full-detailing">
                <h3>Full Detailing</h3>
                <p>Complete interior & exterior detailing with wax protection.</p>
                <span class="price">₱1,200</span>
            </label>
        </div>

        <div class="service-card">
            <input type="checkbox" class="service-check" id="engine-wash" data-prices="500,600,700">
            <label for="engine-wash">
                <h3>Engine Wash</h3>
                <p>Safe engine bay cleaning with protective coating.</p>
                <span class="price">₱500</span>
            </label>
        </div>

    </div>

    <!-- Dynamic Form for Car Size Selection -->
    <div id="multi-service-form-container"></div>

    <div class="total-container">
        <h2>Total Price: <span id="multi-total">₱0</span></h2>
    </div>

    <button id="confirm-booking" class="book-btn">Confirm Booking</button>
</section>

<script>
const serviceChecks = document.querySelectorAll('.service-check');
const formContainer = document.getElementById('multi-service-form-container');
const totalDisplay = document.getElementById('multi-total');
const confirmBtn = document.getElementById('confirm-booking');

function updateTotal() {
    let total = 0;
    serviceChecks.forEach(service => {
        if(service.checked){
            const prices = service.dataset.prices.split(','); // Small default price
            total += parseInt(prices[0]); // Default to Small size
        }
    });
    totalDisplay.textContent = `₱${total}`;
}

// Add listener to checkboxes
serviceChecks.forEach(service => {
    service.addEventListener('change', () => {
        generateForms();
        updateTotal();
    });
});

function generateForms(){
    formContainer.innerHTML = ''; // Clear existing forms

    serviceChecks.forEach(service => {
        if(service.checked){
            const serviceName = service.nextElementSibling.querySelector('h3').textContent;
            const prices = service.dataset.prices.split(',');
            formContainer.innerHTML += `
                <form class="multi-booking-form">
                    <h3>${serviceName} - Select Car Size</h3>
                    <div class="radio-group">
                        <label><input type="radio" name="${service.id}-size" value="${prices[0]}" required> Small - ₱${prices[0]}</label>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="${service.id}-size" value="${prices[1]}"> Medium - ₱${prices[1]}</label>
                    </div>
                    <div class="radio-group">
                        <label><input type="radio" name="${service.id}-size" value="${prices[2]}"> Large - ₱${prices[2]}</label>
                    </div>
                </form>
            `;
        }
    });

    // Update price when car size selected
    const allForms = document.querySelectorAll('.multi-booking-form');
    allForms.forEach(f => {
        const radios = f.querySelectorAll('input[type="radio"]');
        radios.forEach(r => {
            r.addEventListener('change', () => {
                updateTotalPriceBySize();
            });
        });
    });
}

function updateTotalPriceBySize(){
    let total = 0;
    serviceChecks.forEach(service => {
        if(service.checked){
            const radios = document.querySelectorAll(`input[name="${service.id}-size"]`);
            radios.forEach(r => {
                if(r.checked) total += parseInt(r.value);
            });
        }
    });
    totalDisplay.textContent = `₱${total}`;
}

// Confirm Booking
confirmBtn.addEventListener('click', () => {
    let selectedServices = [];
    serviceChecks.forEach(service => {
        if(service.checked){
            const radios = document.querySelectorAll(`input[name="${service.id}-size"]`);
            radios.forEach(r => {
                if(r.checked){
                    const name = service.nextElementSibling.querySelector('h3').textContent;
                    selectedServices.push(`${name} (₱${r.value})`);
                }
            });
        }
    });

    if(selectedServices.length === 0){
        alert("Please select at least one service and car size!");
        return;
    }

    alert(`Booking confirmed for:\n${selectedServices.join('\n')}\n\nTotal: ${totalDisplay.textContent}`);
});
</script>

</body>
</html>